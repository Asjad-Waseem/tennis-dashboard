"use client";

import Link from "next/link";
import { cn } from "@/lib/utils";
import type { NavigationItem } from "@/types";
import { colors } from "@/lib/theme";

interface NavigationItemClientProps {
  item: NavigationItem;
  isCollapsed?: boolean;
  additionalStyles?: string; // Kept for backward compatibility, but not used
  onClick?: (itemId: string) => void;
}

function getIcon(iconName: string, isActive?: boolean): React.ReactElement {
  switch (iconName) {
    case "cloud":
      return (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M8.11019 2.27688C8.5009 1.88618 9.0308 1.66669 9.58333 1.66669C10.1359 1.66669 10.6658 1.88618 11.0565 2.27688C11.3475 2.56787 11.5435 2.93609 11.6246 3.33335H13.75C15.3608 3.33335 16.6667 4.63919 16.6667 6.25002V8.37544C17.0639 8.45653 17.4321 8.65255 17.7231 8.94355C18.1138 9.33425 18.3333 9.86415 18.3333 10.4167C18.3333 10.9692 18.1138 11.4991 17.7231 11.8898C17.4321 12.1808 17.0639 12.3768 16.6667 12.4579V14.5834C16.6667 16.1942 15.3608 17.5 13.75 17.5H11.25C11.0199 17.5 10.8333 17.3135 10.8333 17.0834C10.8333 16.7518 10.7016 16.4339 10.4672 16.1995C10.2328 15.965 9.91485 15.8334 9.58333 15.8334C9.25181 15.8334 8.93387 15.965 8.69945 16.1995C8.46503 16.4339 8.33333 16.7518 8.33333 17.0834C8.33333 17.3135 8.14679 17.5 7.91667 17.5H5.41667C3.80584 17.5 2.5 16.1942 2.5 14.5834V12.0834C2.5 11.8532 2.68655 11.6667 2.91667 11.6667C3.24819 11.6667 3.56613 11.535 3.80055 11.3006L4.09518 11.5952L3.80055 11.3006C4.03497 11.0661 4.16667 10.7482 4.16667 10.4167C4.16667 10.0852 4.03497 9.76722 3.80055 9.5328C3.56613 9.29838 3.24819 9.16669 2.91667 9.16669C2.68655 9.16669 2.5 8.98014 2.5 8.75002V6.25002C2.5 4.63919 3.80584 3.33335 5.41667 3.33335L7.54208 3.33335C7.62318 2.93609 7.8192 2.56787 8.11019 2.27688ZM9.58333 2.50002C9.25181 2.50002 8.93387 2.63172 8.69945 2.86614C8.46503 3.10056 8.33333 3.4185 8.33333 3.75002C8.33333 3.98014 8.14679 4.16669 7.91667 4.16669L5.41667 4.16669C4.26607 4.16669 3.33333 5.09943 3.33333 6.25002V8.37544C3.7306 8.45653 4.09881 8.65256 4.38981 8.94355C4.78051 9.33425 5 9.86415 5 10.4167C5 10.9692 4.78051 11.4991 4.38981 11.8898C4.09881 12.1808 3.7306 12.3768 3.33333 12.4579V14.5834C3.33333 15.7339 4.26607 16.6667 5.41667 16.6667H7.54208C7.62318 16.2694 7.8192 15.9012 8.11019 15.6102L8.40482 15.9048L8.11019 15.6102C8.5009 15.2195 9.0308 15 9.58333 15C10.1359 15 10.6658 15.2195 11.0565 15.6102C11.3475 15.9012 11.5435 16.2694 11.6246 16.6667H13.75C14.9006 16.6667 15.8333 15.7339 15.8333 14.5834V12.0834C15.8333 11.8532 16.0199 11.6667 16.25 11.6667C16.5815 11.6667 16.8995 11.535 17.1339 11.3006C17.3683 11.0661 17.5 10.7482 17.5 10.4167C17.5 10.0852 17.3683 9.76722 17.1339 9.5328C16.8995 9.29838 16.5815 9.16669 16.25 9.16669C16.0199 9.16669 15.8333 8.98014 15.8333 8.75002V6.25002C15.8333 5.09943 14.9006 4.16669 13.75 4.16669H11.25C11.0199 4.16669 10.8333 3.98014 10.8333 3.75002C10.8333 3.4185 10.7016 3.10056 10.4672 2.86614L10.7618 2.57151L10.4672 2.86614C10.2328 2.63172 9.91485 2.50002 9.58333 2.50002Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
        </svg>
      );
    case "live":
      return (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11.25 10.4352C11.25 11.3556 10.5038 12.1018 9.58329 12.1018C8.66282 12.1018 7.91663 11.3556 7.91663 10.4352C7.91663 9.51469 8.66282 8.76849 9.58329 8.76849C10.5038 8.76849 11.25 9.51469 11.25 10.4352Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M13.0203 6.77982C13.1913 6.62584 13.4548 6.63964 13.6088 6.81066C14.3742 7.66073 14.8508 8.7313 14.9704 9.86892C15.09 11.0065 14.8463 12.1528 14.2744 13.1434C14.1593 13.3427 13.9045 13.411 13.7052 13.296C13.5059 13.1809 13.4376 12.9261 13.5527 12.7268C14.0366 11.8886 14.2428 10.9186 14.1416 9.95603C14.0404 8.99342 13.6371 8.08756 12.9895 7.36827C12.8355 7.19725 12.8493 6.9338 13.0203 6.77982Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M15.7115 5.10703C15.8825 4.95305 16.1459 4.96685 16.2999 5.13787C17.4186 6.38028 18.1152 7.94496 18.29 9.60763C18.4647 11.2703 18.1086 12.9456 17.2727 14.3935C17.1577 14.5928 16.9028 14.6611 16.7036 14.546C16.5043 14.4309 16.436 14.1761 16.551 13.9768C17.299 12.6814 17.6176 11.1824 17.4612 9.69474C17.3049 8.20708 16.6816 6.80711 15.6806 5.69547C15.5267 5.52446 15.5405 5.26101 15.7115 5.10703Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M6.14631 6.77982C5.9753 6.62584 5.71185 6.63964 5.55787 6.81066C4.79246 7.66073 4.31581 8.7313 4.19624 9.86892C4.07667 11.0065 4.32032 12.1528 4.89226 13.1434C5.00732 13.3427 5.26215 13.411 5.46144 13.296C5.66073 13.1809 5.72901 12.9261 5.61395 12.7268C5.13 11.8886 4.92383 10.9186 5.02501 9.95603C5.12618 8.99342 5.5295 8.08756 6.17715 7.36827C6.33113 7.19725 6.31733 6.9338 6.14631 6.77982Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M3.45515 5.10703C3.28414 4.95305 3.02068 4.96685 2.8667 5.13787C1.74803 6.38028 1.05139 7.94496 0.876635 9.60763C0.701881 11.2703 1.05798 12.9456 1.8939 14.3935C2.00896 14.5928 2.26379 14.6611 2.46308 14.546C2.66236 14.4309 2.73065 14.1761 2.61559 13.9768C1.86766 12.6814 1.54904 11.1824 1.7054 9.69474C1.86176 8.20708 2.48507 6.80711 3.48599 5.69547C3.63997 5.52446 3.62616 5.26101 3.45515 5.10703Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
        </svg>
      );
    case "scorecard":
      return (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M14.5833 2.5C14.8135 2.5 15 2.68655 15 2.91667L15 4.58333C15 4.81345 14.8135 5 14.5833 5C14.3532 5 14.1667 4.81345 14.1667 4.58333L14.1667 2.91667C14.1667 2.68655 14.3532 2.5 14.5833 2.5Z"
            fill={colors.pink.accent}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M7.08333 2.5C7.31345 2.5 7.5 2.68655 7.5 2.91667L7.5 4.58333C7.5 4.81345 7.31345 5 7.08333 5C6.85321 5 6.66667 4.81345 6.66667 4.58333L6.66667 2.91667C6.66667 2.68655 6.85321 2.5 7.08333 2.5Z"
            fill={colors.pink.accent}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M2.5 7.08335C2.5 5.47252 3.80584 4.16669 5.41667 4.16669H15.4167C17.0275 4.16669 18.3333 5.47252 18.3333 7.08335V13.75C18.3333 15.3609 17.0275 16.6667 15.4167 16.6667H5.41667C3.80584 16.6667 2.5 15.3609 2.5 13.75V7.08335ZM5.41667 5.00002C4.26607 5.00002 3.33333 5.93276 3.33333 7.08335V13.75C3.33333 14.9006 4.26607 15.8334 5.41667 15.8334H15.4167C16.5673 15.8334 17.5 14.9006 17.5 13.75V7.08335C17.5 5.93276 16.5673 5.00002 15.4167 5.00002H5.41667Z"
            fill={colors.primary.blue}
          />
          <path
            d="M12.5048 8.9097C12.472 9.09707 12.6115 9.25358 12.7794 9.25358C12.9473 9.25358 13.0782 9.09486 13.1298 8.91308C13.2627 8.44588 13.6672 8.12429 14.1736 8.12429C14.7501 8.12429 15.1205 8.57362 15.1205 9.13826C15.1205 9.61543 14.9633 9.92559 14.2819 10.7328L12.5928 12.7382C12.5376 12.8037 12.5068 12.8909 12.5068 12.9816C12.5068 13.1759 12.6452 13.3333 12.8159 13.3333H15.5538C15.7082 13.3333 15.8333 13.1909 15.8333 13.0152C15.8333 12.8395 15.7082 12.6971 15.5538 12.6971H13.3839C13.3762 12.6971 13.3699 12.69 13.3699 12.6812L14.5684 11.2815C15.4944 10.2 15.7495 9.72677 15.7495 9.09452C15.7495 8.2237 15.1065 7.5 14.1736 7.5C13.3166 7.5 12.65 8.08185 12.5048 8.9097Z"
            fill={colors.pink.accent}
          />
          <path
            d="M7.08726 13.3333C8.40552 13.3333 9.16667 12.1948 9.16667 10.4108C9.16667 8.6385 8.4016 7.5 7.08726 7.5C5.77291 7.5 5 8.64632 5 10.4147C5 12.1987 5.76507 13.3333 7.08726 13.3333ZM7.08726 12.7191C6.20057 12.7191 5.71014 11.8192 5.71014 10.4108C5.71014 9.03365 6.21234 8.11815 7.08726 8.11815C7.96218 8.11815 8.45653 9.02582 8.45653 10.4147C8.45653 11.8232 7.97003 12.7191 7.08726 12.7191Z"
            fill={colors.pink.accent}
          />
        </svg>
      );
    case "grid":
      return (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M2.5 4.58329C2.5 2.97246 3.80584 1.66663 5.41667 1.66663H7.91667C9.5275 1.66663 10.8333 2.97246 10.8333 4.58329V7.08329C10.8333 8.69412 9.5275 9.99996 7.91667 9.99996H5.41667C3.80584 9.99996 2.5 8.69412 2.5 7.08329V4.58329ZM5.41667 2.49996C4.26607 2.49996 3.33333 3.4327 3.33333 4.58329V7.08329C3.33333 8.23389 4.26607 9.16663 5.41667 9.16663H7.91667C9.06726 9.16663 10 8.23389 10 7.08329V4.58329C10 3.4327 9.06726 2.49996 7.91667 2.49996H5.41667Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M2.5 12.9166C2.5 11.766 3.43274 10.8333 4.58333 10.8333H7.08333C8.23393 10.8333 9.16667 11.766 9.16667 12.9166V15.4166C9.16667 16.5672 8.23393 17.4999 7.08333 17.4999H4.58333C3.43274 17.4999 2.5 16.5672 2.5 15.4166V12.9166ZM4.58333 11.6666C3.89298 11.6666 3.33333 12.2262 3.33333 12.9166V15.4166C3.33333 16.1069 3.89298 16.6666 4.58333 16.6666H7.08333C7.77369 16.6666 8.33333 16.1069 8.33333 15.4166V12.9166C8.33333 12.2262 7.77369 11.6666 7.08333 11.6666H4.58333Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M11.6666 3.74996C11.6666 2.59937 12.5994 1.66663 13.75 1.66663H16.25C17.4006 1.66663 18.3333 2.59937 18.3333 3.74996V6.24996C18.3333 7.40055 17.4006 8.33329 16.25 8.33329H13.75C12.5994 8.33329 11.6666 7.40055 11.6666 6.24996V3.74996ZM13.75 2.49996C13.0596 2.49996 12.5 3.0596 12.5 3.74996V6.24996C12.5 6.94031 13.0596 7.49996 13.75 7.49996H16.25C16.9403 7.49996 17.5 6.94031 17.5 6.24996V3.74996C17.5 3.0596 16.9403 2.49996 16.25 2.49996H13.75Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M10 12.0833C10 10.4725 11.3058 9.16663 12.9167 9.16663H15.4167C17.0275 9.16663 18.3333 10.4725 18.3333 12.0833V14.5833C18.3333 16.1941 17.0275 17.5 15.4167 17.5H12.9167C11.3058 17.5 10 16.1941 10 14.5833V12.0833ZM12.9167 9.99996C11.7661 9.99996 10.8333 10.9327 10.8333 12.0833V14.5833C10.8333 15.7339 11.7661 16.6666 12.9167 16.6666H15.4167C16.5673 16.6666 17.5 15.7339 17.5 14.5833V12.0833C17.5 10.9327 16.5673 9.99996 15.4167 9.99996H12.9167Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
        </svg>
      );
    case "play":
      return (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M1.66663 7.08329C1.66663 5.47246 2.97246 4.16663 4.58329 4.16663H9.58329C11.1941 4.16663 12.5 5.47246 12.5 7.08329V12.0833C12.5 13.6941 11.1941 15 9.58329 15H4.58329C2.97246 15 1.66663 13.6941 1.66663 12.0833V7.08329ZM4.58329 4.99996C3.4327 4.99996 2.49996 5.9327 2.49996 7.08329V12.0833C2.49996 13.2339 3.4327 14.1666 4.58329 14.1666H9.58329C10.7339 14.1666 11.6666 13.2339 11.6666 12.0833V7.08329C11.6666 5.9327 10.7339 4.99996 9.58329 4.99996H4.58329Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M17.4999 7.92004C17.4999 6.92644 16.3967 6.33001 15.5653 6.87416L14.732 7.41962C14.3792 7.65056 14.1666 8.04381 14.1666 8.4655V11.2089C14.1666 11.6306 14.3792 12.0238 14.732 12.2547L15.5653 12.8002C16.3967 13.3444 17.4999 12.7479 17.4999 11.7543V7.92004ZM15.109 6.17691C16.4945 5.26999 18.3333 6.26404 18.3333 7.92004V11.7543C18.3333 13.4103 16.4945 14.4044 15.109 13.4975L14.2756 12.952C13.6876 12.5671 13.3333 11.9117 13.3333 11.2089V8.4655C13.3333 7.76269 13.6876 7.10726 14.2756 6.72237L15.109 6.17691Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
        </svg>
      );
    case "chart":
      return (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M2.91667 2.50012C3.14679 2.50012 3.33333 2.68667 3.33333 2.91679V15.8335H17.9167C18.1468 15.8335 18.3333 16.02 18.3333 16.2501C18.3333 16.4802 18.1468 16.6668 17.9167 16.6668H2.91667C2.68655 16.6668 2.5 16.4802 2.5 16.2501V2.91679C2.5 2.68667 2.68655 2.50012 2.91667 2.50012Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M17.2558 2.53745C17.4652 2.63267 17.5579 2.87969 17.4627 3.08919L13.296 12.2559C13.2284 12.4046 13.0801 12.5001 12.9167 12.5001H8.08926L5.71129 14.8781C5.54858 15.0408 5.28476 15.0408 5.12204 14.8781C4.95932 14.7153 4.95932 14.4515 5.12204 14.2888L7.62204 11.7888C7.70018 11.7107 7.80616 11.6668 7.91667 11.6668H12.6484L16.704 2.74435C16.7992 2.53486 17.0463 2.44223 17.2558 2.53745Z"
            fill={isActive ? colors.primary.blue : colors.purple.light}
          />
        </svg>
      );
    default:
      return <div className="w-5 h-5" />;
  }
}

export default function NavigationItemClient({
  item,
  isCollapsed = false,
  additionalStyles,
  onClick,
}: NavigationItemClientProps): React.ReactElement {
  const isActive = item.isActive ?? false;

  const handleClick = (e: React.MouseEvent<HTMLAnchorElement>) => {
    if (item.id !== "score" && onClick) {
      e.preventDefault();
      onClick(item.id);
    }
  };

  return (
    <div className="relative" style={{ width: "260px" }}>
      {isActive && !isCollapsed && (
        <div 
          className="absolute top-1/2 h-[30px] w-[5px] -translate-y-1/2 rounded-[50px] shadow-[_-2px_0px_10px_2px_rgba(0,56,255,0.15)]"
          style={{
            backgroundColor: colors.primary.blue,
            right: "0",
          }}
        />
      )}
      <Link
        href={item.href}
        onClick={handleClick}
        className={cn(
          "relative flex items-center gap-[10px] rounded-lg px-3 py-2 transition-all duration-200"
        )}
        style={{
          backgroundColor: "transparent",
        }}
        onMouseEnter={(e) => {
          e.currentTarget.style.backgroundColor = isActive ? colors.primary.blueLighter : colors.primary.blueLightest;
        }}
        onMouseLeave={(e) => {
          e.currentTarget.style.backgroundColor = "transparent";
        }}
        title={isCollapsed ? item.label : undefined}
      >
        <span className="flex h-5 w-5 flex-shrink-0 items-center justify-center">
          {getIcon(item.icon, isActive)}
        </span>
        {!isCollapsed && (
          <>
            <span
              className="text-[15px] leading-[18px] tracking-[1px]"
              style={{
                fontFamily:
                  "'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",
                fontWeight: 400,
                color: isActive ? colors.primary.blue : colors.purple.light,
              }}
            >
              {item.label}
            </span>
            {item.badge && (
              <span
                className={cn(
                  "ml-2 flex flex-shrink-0 items-center justify-center rounded text-white",
                  item.badgeColor === "red" && "bg-red-500",
                  item.badge === "LIVE"
                    ? "h-4 w-8 text-[10px] font-semibold leading-none tracking-wide"
                    : "px-2 py-0.5 text-sm font-normal leading-tight tracking-wider"
                )}
              >
                {item.badge}
              </span>
            )}
          </>
        )}
      </Link>
    </div>
  );
}

